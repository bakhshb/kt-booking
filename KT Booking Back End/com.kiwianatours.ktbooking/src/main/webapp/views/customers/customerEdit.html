<div>
	<div class="row">
		<div class="col-md-12">
			<h1>
				<span class="glyphicon glyphicon-edit"></span> {{title}} Customer <small>{{
					customer.firstName + ' ' + customer.lastName }} <span
					data-ng-hide="customer.id == null"> </span>
				</small>
			</h1>

			<div class="navbar">
				<ul class="nav navbar-nav">
					<li class="toolbaritem"><a href="#/customer">&#xA0;<span
							class="glyphicon glyphicon-home"></span>Customer
					</a></li>
					<li class="toolbaritem" data-ng-hide="customer.id == null"><a
						href="#/customer/booking/{{customer.id}}">&#xA0;<span
							class="glyphicon glyphicon-eye-open"></span>View Booking
					</a></li>
				</ul>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-2"></div>
		<div class="col-md-8">
			<form name="form" novalidate>
				<div class="form-group">
					<label>First Name</label> <input type="text" name="firstName"
						class="form-control" data-ng-model="customer.firstName"
						placeholder="First Name" ng-minlength=1 ng-maxlength=50 required />
					<div class="error"
						ng-show="form.firstName.$dirty && form.firstName.$invalid">
						<small class="error" ng-show="form.firstName.$error.required">
							First Name is required </small> <small class="error"
							ng-show="form.firstName.$error.minlength"> First Name is
							required to be at least 1 character </small> <small class="error"
							ng-show="form.firstName.$error.maxlength"> First Name
							cannot be longer than 50 characters </small>
					</div>
				</div>
				<div class="form-group">
					<label>Last Name:</label> <input type="text" name="lastName"
						class="form-control" data-ng-model="customer.lastName"
						placeholder="Last Name" ng-minlength=1 ng-maxlength=50 required />
					<div class="error"
						ng-show="form.lastName.$dirty && form.lastName.$invalid">
						<small class="error" ng-show="form.lastName.$error.required">
							Last Name is required </small> <small class="error"
							ng-show="form.lastName.$error.minlength"> Last Name is
							required to be at least 1 character </small> <small class="error"
							ng-show="form.lastName.$error.maxlength"> Last Name
							cannot be longer than 50 characters </small>
					</div>
				</div>
				<div class="form-group">
					<label>Birthday:</label>
					<p class="input-group">
						<input type="text" name="birthday" class="form-control"
							ng-model="customer.birthday" datepicker-popup="yyyy-MM-dd"
							is-open="opened" min-date="minDate" max-date="'2015-06-22'"
							datepicker-options="dateOptions"
							date-disabled="disabled(date, mode)" ng-required="true"
							close-text="Close" placeholder="yyyy-mm-dd" /> <span
							class="input-group-btn">
							<button type="button" class="btn btn-default"
								ng-click="open($event)">
								<i class="glyphicon glyphicon-calendar"></i>
							</button>
						</span>
					</p>
				</div>

				<div class="form-group"
					ng-if="form.birthday.$dirty && calculateAge(customer.birthday) < 18 || customer.permissionFrom != null">

					<label>Permission:</label> <input type="text" name="permission"
						class="form-control" data-ng-model="customer.permissionFrom"
						placeholder="Permission" ng-minlength=1 ng-maxlength=100 required />
				</div>
				<div class="form-group">
					<label>Gender:</label>
					<div class="radio">
						<label class="radio"> <input type="radio" name="gender"
							value="Male" data-ng-checked="customer.gender == 'Male'"
							data-ng-model="customer.gender" /> Male
						</label>
					</div>
					<div class="radio">
						<label class="radio"> <input type="radio" name="gender"
							value="Female" data-ng-checked="customer.gender == 'Female'"
							data-ng-model="customer.gender" /> Female <br />
						</label>
					</div>
				</div>
				<div class="form-group">
					<label>Nationality:</label>
					<country-select name="nationality" class="form-control"
						data-ng-model="customer.nationality" required></country-select>
				</div>
				<div class="form-group">
					<label>Email:</label>
					<!-- type="email" causing a problem with Breeze so using regex -->
					<input type="email" name="email" class="form-control"
						data-ng-model="customer.email" placeholder="Email" ng-minlength=1
						ng-maxlength=100 required />
					<div class="error"
						ng-show="form.email.$dirty && form.email.$invalid">
						<small class="error" ng-show="form.email.$error.required">
							Email is required </small> <small class="error"
							ng-show="form.email.$error.minlength"> Email is required
							to be at least 1 character </small> <small class="error"
							ng-show="form.email.$error.maxlength"> Email cannot be
							longer than 100 characters </small>
					</div>
				</div>
				<div class="form-group">
					<label>Phone:</label> <input type="text" name="contactNo"
						class="form-control" data-ng-model="customer.contactNo"
						placeholder="Contact No" only-num ng-maxlength=11 required />
					<div class="error"
						ng-show="form.contactNo.$dirty && form.contactNo.$invalid">
						<small class="error" ng-show="form.contactNo.$error.required">
							Phone No is required </small><small class="error"
							ng-show="form.contactNo.$error.maxlength">Phone
							cannot be longer than 11 characters </small>
					</div>
				</div>
				<div class="form-group">
					<label>Additional Info:</label>
					<textarea class="form-control" name="additionalinfo"
						ng-model="customer.additionalinfo" placeholder="Info" rows="3"></textarea>
				</div>
				<hr class="divider">
				<div class="form-group" ng-if="customer.id == null">
					<label>Tour Name:</label> <select name="tourId"
						class="form-control" ng-model="tour.id" required>
						<option selected disabled value="">-- Select Tour Name --</option>
						<option ng-repeat="tour in tours" value="{{tour.id}}">{{tour.name}}</option>
					</select>
				</div>
				<div class="form-group" ng-if="customer.id == null">
					<label>Departure Date:</label> <select name="tourScheduleId"
						class="form-control" data-ng-model="customer.tourSchedule.id"
						ng-disabled="form.tourId.$invalid" required>
						<option selected disabled value="">-- Select Departure
							Date --</option>
						<option ng-repeat="tourSchedule in tourSchedules |filter: tour.id"
							value="{{tourSchedule.id}}"
							ng-hide="tourSchedule.departureDate < {{yesterday}}">{{tourSchedule.departureDate}}</option>
					</select>
				</div>
				<div class="form-group" ng-if="customer.id == null">
					<label>payment Method:</label> <select
						name="tourSchedulePaymentMethod" class="form-control"
						data-ng-model="customer.booking.paymentMethod"
						ng-disabled="form.tourSchedule_id.$invalid" required>
						<option selected disabled value="">-- Select Payment
							Method --</option>
						<option value="Cash">Cash</option>
						<option value="EFTPOS">EFTPOS</option>
						<option value="Credit Card">Credit Card</option>
					</select>
				</div>
				<div class="form-group">
					<button type="submit" class="btn btn-primary"
						data-ng-click="saveCustomer()"
						ng-disabled="form.$invalid || !form.$dirty">
						<span class="glyphicon glyphicon-save"></span> {{buttonText}}
					</button>
					&nbsp;&nbsp;
					<button type="reset" class="btn ">
						<span class="glyphicon glyphicon-refresh"></span> Clear
					</button>
					&nbsp;&nbsp;
					<button class="btn btn-danger" data-ng-if="customer.id > 0"
						data-ng-click="deleteCustomer()">
						<span class="glyphicon glyphicon-remove-circle"></span> Delete
					</button>
				</div>
				<div class="form-group">
					<div class="alert alert-success" data-ng-show="updateStatus">
						<span class="glyphicon glyphicon-thumbs-up icon-white"></span>&nbsp;&nbsp;Customer
						updated!
					</div>
					<br />
					<div class="alert alert-danger" data-ng-show="errorMessage">
						<span class="glyphicon glyphicon-thumbs-down icon-white"></span>&nbsp;&nbsp;Error:
						{{ errorMessage }}
					</div>
				</div>
			</form>
		</div>
		<div class="col-md-2"></div>
	</div>
</div>